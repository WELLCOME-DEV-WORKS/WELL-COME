<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>section1</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        height: 200vh;
      }

      .img-section {
        width: 100%;
        height: 100%;
        position: fixed;
      }

      .img-row {
        display: flex;
        width: 80%;
        align-items: center;
        justify-content: center;
      }

      /* 이미지 공통 스타일 */
      img.img {
        width: 660px;
        height: auto;
        flex-shrink: 0;
        position: relative;
        box-shadow: 5px 5px 14px #0000007c;
      }

      /* 여권 이미지별 스타일 */
      img.passport1 {
        transform: rotate(-8.515deg);
        z-index: 3;
        left: 170px;
        top: -280px;
      }
      img.passport2 {
        transform: rotate(28.515deg);
        z-index: 2;
        left: 140px;
        top: -200px;
      }

      img.passport3 {
        transform: rotate(-8.104deg);
        z-index: 1;
        right: -300px;
        top: -10px;
      }

      img.passport4 {
        transform: rotate(17.104deg);
        z-index: 5;
        left: 50px;
        bottom: 600px;
      }

      img.passport5 {
        transform: rotate(-30.104deg);
        z-index: 4;
        left: 200px;
        bottom: 700px;
      }

      /* 여권 애니메이션 */
      /* 10시 방향 */
      @keyframes moveTo10 {
        to {
          transform: translate(-100vw, -100vh);
          opacity: 0;
        }
      }

      /* 12시 방향 */
      @keyframes moveTo12 {
        to {
          transform: translateY(-100vh);
          opacity: 0;
        }
      }

      /* 3시 방향 */
      @keyframes moveTo3 {
        to {
          transform: translateX(100vw);
          opacity: 0;
        }
      }

      /* 8시 방향 */
      @keyframes moveTo8 {
        to {
          transform: translate(-100vw, 100vh);
          opacity: 0;
        }
      }

      /* 5시 방향 */
      @keyframes moveTo5 {
        to {
          transform: translate(100vw, 100vh);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <section class="img-section">
      <div class="img-row">
        <img
          src="../static/img/Korea.svg"
          alt="passport3"
          class="img passport1"
          id="passport-img-1"
        />
        <img
          src="../static/img/China.svg"
          alt="passport1"
          class="img passport2"
          id="passport-img-2"
        />
        <img
          src="../static/img/Japan.svg"
          alt="passport2"
          class="img passport3"
          id="passport-img-3"
        />
      </div>
      <div class="img-row">
        <img
          src="../static/img/USA.svg"
          alt="passport4"
          class="img passport4"
          id="passport-img-4"
        />
        <img
          src="../static/img/Vietnam.svg"
          alt="passport5"
          class="img passport5"
          id="passport-img-5"
        />
      </div>
    </section>
    <script>
      // 모든 여권 이미지에 대한 이벤트 추가
      const passportImages = document.querySelectorAll('img');
      let previousScrollY = 0; // 이전 스크롤 위치 확인용 변수
      let scrollTriggered = false; // 애니메이션이 실행되었는지 여부

      // 스크롤 이벤트
      window.addEventListener('scroll', function () {
        const currentScrollY = window.scrollY;

        // 특정 스크롤 위치에 도달하면 애니메이션 실행
        if (currentScrollY > 50 && !scrollTriggered) {
          passportImages.forEach((img) => {
            resetAnimation(img); // 기존 애니메이션 초기화
            moveImage(img, 'normal'); // 스크롤 다운 시 애니메이션 실행
          });
          scrollTriggered = true; // 애니메이션이 한 번 실행되면 다시 실행되지 않도록 설정
        }

        // 스크롤이 다시 100px 이하로 올라갔을 때 애니메이션 반대로 실행
        if (currentScrollY <= 50 && scrollTriggered) {
          passportImages.forEach((img) => {
            resetAnimation(img); // 기존 애니메이션 초기화
            moveImage(img, 'reverse'); // 스크롤 업 시 애니메이션 반대로 실행
          });
          scrollTriggered = false; // 다시 스크롤을 내릴 때 애니메이션이 작동할 수 있도록 설정
        }

        // 이전 스크롤 위치 업데이트
        previousScrollY = currentScrollY;
      });

      // 이미지 이동 함수
      function moveImage(img, direction) {
        let duration = direction === 'reverse' ? '1.5s' : '1.5s';

        // 애니메이션 방향 설정
        switch (img.id) {
          case 'passport-img-1': // passport1은 10시 방향
            img.style.animation = `moveTo10 ${duration} forwards`;
            break;
          case 'passport-img-2': // passport2는 12시 방향
            img.style.animation = `moveTo12 ${duration} forwards`;
            break;
          case 'passport-img-3': // passport3은 3시 방향
            img.style.animation = `moveTo3 ${duration} forwards`;
            break;
          case 'passport-img-4': // passport4는 8시 방향
            img.style.animation = `moveTo8 ${duration} forwards`;
            break;
          case 'passport-img-5': // passport5는 5시 방향
            img.style.animation = `moveTo5 ${duration} forwards`;
            break;
        }

        // 애니메이션 방향 설정 (normal 또는 reverse)
        if (direction === 'reverse') {
          img.style.animationDirection = 'reverse';
        } else {
          img.style.animationDirection = 'normal';
        }
      }

      // 애니메이션을 다시 적용할 수 있도록 초기화
      function resetAnimation(img) {
        img.style.animation = 'none'; // 애니메이션 제거
        img.offsetHeight; // 강제로 리플로우 발생 (애니메이션 재적용을 위해)
        img.style.animation = ''; // 애니메이션 속성 초기화
      }
    </script>
  </body>
</html>
