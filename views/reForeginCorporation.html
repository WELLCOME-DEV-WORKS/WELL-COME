<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link rel="stylesheet" href="../static/css/reForeginCorporation.css" />
</head>

<body>
  <div class="fc-nav-container">
    <div class="fc-mo-grid-container">
      <div id="fc-nav-moLogo">
        <a href="https://well-come.info">WELL-COME</a>
      </div>
      <div id="fc-nev-dropdown">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </div>
      <div id="fc-dropMenu-container" class="fc-hidden move-out">
        <div class="fc-serviceTitle">외국인 서비스</div>
        <div class="fc-dropMenu-line"></div>
        <div class="fc-dropMenu" id="fc-dropMenu-1">
          <a href="https://well-come.info/">외국인 취업</a>
        </div>
        <div class="fc-dropMenu" id="fc-dropMenu-2">
          <a href="https://well-come.info/corporate-visa">외국인 창업비자</a>
        </div>
        <div class="fc-dropMenu" id="fc-dropMenu-3">
          <a href="https://well-come.info/incorporation">외국인 법인설립</a>
        </div>
        <div class="fc-serviceTitle">기업 서비스</div>
        <div class="fc-dropMenu-line"></div>
        <div class="fc-dropMenu" id="fc-dropMenu-4">
          <a href="#">서비스 문의</a>
        </div>

        <div id="fc-nav-moLogo">
          <a href="https://well-come.info">WELL-COME</a>
          <div>서울시 마포구 마포대로 78<br />자람빌딩 11층 1113,1115호</div>
          <div>1551-8016</div>
        </div>
      </div>
    </div>

    <div class="fc-grid-container">
      <div class="fc-nav-logo" id="fc-nav-topLogo">
        <a href="https://well-come.info">WELL-COME</a>
      </div>
      <div class="fc-nav-menu-container">
        <div></div>
        <div></div>
        <div class="fc-topMenu" id="fc-topMenu-1">
          <a href="https://well-come.info/incorporation">법인설립</a>
        </div>
        <div class="fc-topMenu active" id="fc-topMenu-2">
          <a class="fc-active" href="https://well-come.info/corporate-visa">창업비자</a>
        </div>
      </div>
    </div>
  </div>
  <div class="fc-fullSection-container">
    <div class="fc-mainSection">
      <div class="fc-multiDisplaySection-form">
        <!-- 폼 섹션 시작 -->
        <section class="fc-form-multiStep active" id="fc-userEduAbility">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请选择 韩国人/外国人</div>
          <div class="fc-userEduCountry">
            <div class="fc-radio-SelectBox" data-edu="내국인">
              <input type="radio" name="education_level" value="내국인" />
              <img src="https://cdn.imweb.me/thumbnail/20240822/17ae2878ffff8.png" />
              韩国人
            </div>
            <div class="fc-radio-SelectBox" data-edu="외국인">
              <input type="radio" name="education_level" value="외국인" />
              <img src="https://cdn.imweb.me/thumbnail/20240822/736184391d2cb.png" />
              外国人
            </div>
          </div>
          <div class="fc-activeControlBox">
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">居住地区</div>
          <div class="fc-radio-SelectBox" data-value="한국 거주">
            <input type="radio" name="education_level" value="한국 거주" />
            韩国
          </div>
          <div class="fc-radio-SelectBox" data-value="해외 거주">
            <input type="radio" name="education_level" value="해외 거주" />
            海外
          </div>
          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-intellectualPropertyRights">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请选择注册公司的类型</div>
          <div class="fc-radio-SelectBox" data-value="주식회사">
            <input type="radio" name="education_level" value="주식회사" />
            股份公司
          </div>
          <div class="fc-radio-SelectBox" data-value="유한책임회사">
            <input type="radio" name="education_level" value="유한책임회사" />
            责任有限公司
          </div>
          <div class="fc-radio-SelectBox" data-value="유한회사">
            <input type="radio" name="education_level" value="유한회사" />
            有限公司
          </div>
          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-intellectualPropertyRights-sub">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请选择公司设立地区</div>
          <select name="intellectual_property" class="fc-dropdown" id="regionSelect" onchange="updateSubRegion()">
            <option value="">选择 市/道</option>
            <option value="서울특별시">首尔特别市</option>
            <option value="인천광역시">仁川广域市</option>
            <option value="경기도">京畿道</option>
            <option value="강원특별자치도">江原特别自治道 </option>
            <option value="충청북도">忠清北道 </option>
            <option value="충청남도">忠清南道 </option>
            <option value="전라북도">全罗北道 </option>
            <option value="전라남도">全罗南道 </option>
            <option value="경상북도">庆尚北道</option>
            <option value="경상남도">庆尚南道</option>
            <option value="부산광역시">釜山广域市</option>
            <option value="대구광역시">大邱广域市</option>
            <option value="울산광역시">蔚山广域市</option>
            <option value="광주광역시">光州广域市</option>
            <option value="대전광역시">大田广域市</option>
            <option value="세종특별자치시">世宗特別自治市</option>
            <option value="제주특별자치도">济州特别自治道</option>
          </select>

          <select class="fc-dropdown" id="subRegionSelect">
            <option value="">选择 市/区</option>
          </select>


          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-isCorporationEstablished">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请填写法人姓名</div>
          <input type="text" class="fc-formButton" placeholder="法人姓名" />
          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-isCorporationEstablished-sub">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请填写姓名</div>
          <input type="text" class="fc-formButton" placeholder="姓名" />

          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-nextButton deactiveted">下一步</div>
          </div>
        </section>

        <section class="fc-form-multiStep" id="fc-isCorporationEstablished-sub">
          <div class="fc-scoreDisplay" id="scoreDisplay"></div>
          <div class="fc-form-title">请填写联系方式</div>
          <input type="text" class="fc-formButton" placeholder="联系电话" />

          <div class="fc-activeControlBox">
            <div class="fc-prevButton">上一步</div>
            <div class="fc-finishButton deactiveted" onclick="submitInfo()">提交</div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <section class="fc-warringModal">
    <div class="fc-warringModal-content">
      <div class="fc-warringModal-title">警告</div>
      <div class="fc-warringModal-message"></div>
      <div class="fc-warringModal-button">确认</div>
    </div>
  </section>
  </section>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const nextButtons = document.querySelectorAll(".fc-nextButton");
      const prevButtons = document.querySelectorAll(".fc-prevButton");
      const steps = document.querySelectorAll(".fc-form-multiStep");

      let currentStep = 0;

      // 초기 단계에서 로컬 스토리지 초기화
      if (currentStep === 0) {
        localStorage.clear();
      }

      // 주어진 인덱스에 해당하는 단계만 보이도록 설정
      function showStep(index) {
        steps.forEach((step, i) => {
          step.classList.toggle("active", i === index);
        });
      }

      // 경고 팝업을 표시하는 함수
      function warringPopup(message) {
        const warringModal = document.querySelector(".fc-warringModal");
        const warringMessage = document.querySelector(
          ".fc-warringModal-message"
        );
        const warringButton = document.querySelector(".fc-warringModal-button");

        warringMessage.textContent = message;
        warringModal.style.display = "flex";
        warringButton.addEventListener("click", () => {
          warringModal.style.display = "none";
        });
      }

      // 현재 단계에 대한 유효성 검사
      function validateStep() {
        const validationRules = [
          {
            step: 0,
            message: "请选择国家",
            selector: 'input[name="education_level"]:checked', // 라디오 버튼 체크 확인
          },
          {
            step: 1,
            message: "请选择居住国家",
            selector: "#fc-userKoreanTestLevel .fc-formButton.selected",
          },
          {
            step: 2,
            message: "请选择公司类型",
            selector: "#fc-intellectualPropertyRights .fc-formButton.selected",
          },
          {
            step: 3,
            message: "请选择公司设立地区",
            selector: "#fc-patent .fc-formButton.selected",
          },
          {
            step: 4,
            message: "请输入法人姓名",
            selector: "#fc-isCorporationEstablished .fc-formButton.selected",
          },
          {
            step: 5,
            message: "请填写姓名.",
            selector: "#fc-isCorporationEstablished-sub .fc-formButton.selected",
          },
          {
            step: 6,
            message: "请填写联系方式",
            selector: "#fc-isCorporationEstablished-sub .fc-formButton.selected",
          },
        ];

        const rule = validationRules[currentStep];
        const storedValue = localStorage.getItem(`${currentStep} selectedValue`)
        // 카드 기반 유효성 검사 및 입력 필드 검사 통합
        if (!storedValue) {
          console.log('카드기반 유효성');
          warringPopup(rule.message); // 경고 메시지 표시
          return false; // 유효성 검사 실패
        }
        return true; // 유효성 검사 통과
      }



      // 설립 지역 데이터 리스트
      const regionSelect = document.getElementById("regionSelect");
      regionSelect.addEventListener("change", function () {
        const selectedValue = this.value;
        console.log(this.value);
        saveToLocalStorage(`${currentStep} selectedValue`, selectedValue);
      });
      // 카드 클릭 이벤트 추가
      const radioSelectBoxes = document.querySelectorAll('.fc-radio-SelectBox');
      radioSelectBoxes.forEach(box => {
        box.addEventListener('click', handleCardClick); // 카드 클릭 시 이벤트 핸들러 추가
      });

      // 카드 클릭 이벤트 핸들러
      function handleCardClick(event) {
        const selectedRadioValue = event.currentTarget.querySelector('input[type="radio"]');
        highlightSelectedCard(event.currentTarget); // 카드 강조 처리
        if (selectedRadioValue) {
          saveSelectedValue(selectedRadioValue.value); // 로컬 스토리지에 값 저장
        }
      }

      // 카드 강조 처리 함수
      function highlightSelectedCard(clickedCard) {
        // 모든 카드에서 'selected' 클래스 제거
        radioSelectBoxes.forEach(box => {
          box.classList.remove('selected');
        });

        // 클릭된 카드에 'selected' 클래스 추가
        clickedCard.classList.add('selected');
      }

      // 로컬 스토리지에 값 저장 함수
      function saveSelectedValue(value) {
        saveToLocalStorage(`${currentStep} selectedValue`, value);
      }

      // 로컬 스토리지에 값 저장
      function saveToLocalStorage(key, value) {
        localStorage.setItem(key, value);
        console.log(localStorage); // 저장된 로컬 스토리지 확인
      }




      // 다음 단계로 이동하는 함수
      function goToNextStep() {
        const currentStepElement = steps[currentStep];

        if (!validateStep()) {
          return; // 유효성 검사 실패 시 종료
        }

        currentStepElement.classList.remove("active");


        currentStep += 1; // 다음 단계로 이동

        if (currentStep < steps.length) {
          steps[currentStep].classList.add("active");
        }

        // 결과 페이지로 이동
        if (currentStep === steps.length - 1) {
          setTimeout(() => {
            const loadingSection = document.getElementById("fc-scoreResultLoading");
            loadingSection.classList.remove("active");
            // 추가 로직...
          }, 1500);
        }
      }



      // input text 추가 이벤트
      const textSelectBoxes = document.querySelectorAll('.fc-formButton');
      textSelectBoxes.forEach((input) => {
        input.addEventListener('input', (e) => {
          const value = e.target.value;
          const placeholder = input.placeholder;

          saveToLocalStorage(`${currentStep} selectedValue`, value);

          console.log(`Saved ${placeholder}: ${value}`); // 저장된 값 확인용
        });
      });

      // 다음 버튼 클릭 시 goToNextStep 호출
      nextButtons.forEach((button) => {
        button.addEventListener("click", goToNextStep);

      });

      // 이전 버튼 클릭 시 이전 단계로 이동
      prevButtons.forEach((button) => {
        button.addEventListener("click", () => {
          if (currentStep > 0) {
            currentStep--;
            showStep(currentStep);
          }
        });
      });

      // 초기 단계 표시
      showStep(currentStep);
    });


    // 하위 주소 로직
    let areaList = {
      "首尔特别市": [
        "江南区", "江南区", "江北区", "江西区", "冠岳区", "广津区", "九老区", "衿川区",
        "芦原区", "道峰区", "东大门区", "铜雀区", "麻浦区", "西大门区", "瑞草区", "城东区",
        "城北区", "松坡区", "阳川区", "永登浦区", "龙山区", "恩平区", "钟路区", "中区", "中浪区"
      ],
      "京畿道": [
        "高阳市", "果川市", "光明市", "广州市", "九里市", "军浦市",
        "金浦市", "南杨州市", "东豆川市", "富川市", "城南市", "水原市",
        "始兴市", "安山市", "安城市", "安养市", "杨州市", "骊州市",
        "乌山市", "龙仁市", "义王市", "议政府市", "利川市", "坡州市",
        "平泽市", "抱川市", "河南市", "华城市"
      ],
      "江原特别自治道": [
        "江陵市", "东海市", "三陟市", "束草市", "原州市", "春川市", "太白市"
      ],
      "忠清北道": [
        "堤川市", "清州市", "忠州市"
      ],
      "忠清南道": [
        "鸡龙市", "公州市", "论山市", "唐津市", "保宁市", "瑞山市", "牙山市", "天安市"
      ],
      "全罗北道": [
        "群山市", "金堤市", "南原市", "益山市", "全州市", "井邑市"
      ],
      "全罗南道": [
        "光阳市", "罗州市", "木浦市", "顺天市", "丽水市"
      ],
      "庆尚北道 ": ["庆山市", "庆州市", "龟尾市", "金泉市", "闻庆市", "尚州市",
        "安东市", "荣州市", "永川市", "浦项市"
      ],
      "庆尚南道": [
        "金海市", "密阳市", "泗川市", "梁山市", "晋州市", "昌原市", "统营市"
      ],
      "釜山广域市": ["无"],
      "大邱广域市": ["无"],
      "蔚山广域市": ["无"],
      "光州广域市": ["无"],
      "大田广域市": ["无"],
      "世宗特別自治市": ["无"],
      "济州特别自治道": [
        "西归浦市", "济州市"
      ]
    };

    const updateSubRegion = () => {
      let regionSelect = document.getElementById("regionSelect");
      let subRegionSelect = document.getElementById("subRegionSelect");
      let selectedRegionIndex = regionSelect.selectedIndex;
      let selectedRegion = regionSelect.options[selectedRegionIndex].text;
      console.log('selectedRegion', selectedRegion);


      // 하위 지역 초기화
      subRegionSelect.innerHTML = '<option value="">选择 市/区</option>';

      if (selectedRegion) {
        let subRegions = areaList[selectedRegion];

        // 하위 지역이 없음인 경우
        if (subRegions.length === 0 || subRegions[0] === "无") {
          let option = document.createElement("option");
          option.value = "无";
          option.textContent = "无";
          subRegionSelect.appendChild(option);
          subRegionSelect.value = "无";
        } else {
          // 하위 지역 추가
          subRegions.forEach(function (subRegion) {
            let option = document.createElement("option");
            option.value = subRegion;
            option.textContent = subRegion;
            subRegionSelect.appendChild(option);
          });
        }
      }
    }






    const submitInfo = () => {
      console.log('submitInfo');
      const submitLimit = localStorage.getItem('6 selectedValue')

      if (submitLimit && submitLimit.length >= 2) {
        document.getElementById("input_txt_2adc34665cda5").value =
          localStorage.getItem('0 selectedValue')
        document.getElementById("input_txt_79cacd4241db5").value =
          localStorage.getItem('1 selectedValue')
        document.getElementById("input_txt_D44y508KH2").value =
          localStorage.getItem('2 selectedValue')
        document.getElementById("input_txt_186pTBK084").value =
          localStorage.getItem('3 selectedValue')
        document.getElementById("input_txt_1RBdDI3aF0").value =
          localStorage.getItem('4 selectedValue')
        document.getElementById("input_txt_T53Ny7dP83").value =
          localStorage.getItem('5 selectedValue')
        document.getElementById("input_txt_6vvJcU7o8Q").value =
          localStorage.getItem('6 selectedValue')
        SITE_FORM.confirmInputForm('w202409197a6d11485bedb', 'N');
        localStorage.clear();
      }
    }
  </script>

</body>

</html>
input_txt_2adc34665cda5